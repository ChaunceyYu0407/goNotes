# 什么是Go语言中的包

## 包的概念

```
net
├── http
├── internal
├── mail
├── rpc
├── smtp
├── testdata
├── textproto
└── url
```

以上是net包的一个目录结构，net本身是一个包，net目录下的http又是一个包。从这个大家可以看到，go语言的包其实就是我们计算机里的目录，或者叫文件夹。



## 包的命名规范

- Go语言包的命名，遵循简洁、==小写==、和==go文件所在目录同名的原则==，这样便于引用，书写以及快速定位查找。

> ==Go源文件的命名规范==
>
> Go 的源文件以 `.go` 为后缀名存储在计算机中，这些文件名均由小写字母组成，如 `scanner.go` 。如果文件名由多个部分组成，则使用下划线 `_` 对它们进行分隔，如 `scanner_test.go` 。文件名不包含空格或其他特殊字符。



以go/http包为例，它这个http目录下所有的go文件都属于这个http包，所以我们使用http包里的函数、接口的时候，导入这个http包就可以了。

```go
package main

import "net/http"

func main(){
	http.ListenAndServe("127.0.0.1:80",handler);
}
```

编译器会使用`GOPATH`和`GOROOT`这两个路径，再加上import导入的相对全路径来查找磁盘上的包，先在GOROOT中查找，然后在GOPATH查找。因为是全路径，所以包的包名可以和其他库的一样，只要全路径不同即可。



## main包

当把一个go文件的包名声明为main时，就等于告诉go编译程序，这是一个可执行的程序，那么go编译程序就尝试把它编译为一个二进制的可执行文件。



一个main包一个会包含一个main()函数，这是一个程序的入口，没有这个函数，程序就无法执行。==在go语言里，同时要满足main包和包含main()函数，才会被编译成一个可执行文件==。

如果编译包名不是main的源文件，如`pack1`，编译后产生的对象文件将会是`pack1.a`而不是可执行程序。



## 标准库

在Go的安装文件里包含了一些可以直接使用的包，即标准库，例如fmt和os

路径：`\$GOROOT/pkg/\$GOOS_\$GOARCH`



## 包的导入

```go
import "fmt"
import "os"

//or

import (
	"fmt"
	"os"
)
```

- 当导入多个包时，最好按字母排序排列包名，这样做更加清晰易读
- 如果包名如`"fmt"` 或`container/list`这样的，则Go会在全局文件进行查找
- 如果包名以`./`开头，则Go会在相对目录中查找
- 如果包名以`/`开头，则会在系统的绝对路径中查找



## 包的别名

包可以视作命名空间，能够避免命名冲突（名称冲突）。两个包中的同名变量的区别在于他们的包名，例如 `pack1.Thing` 和 `pack2.Thing`。

可以通过使用包的别名来解决包名之间的名称冲突，或者说根据个人喜好对包名进行重新设置，如：`import fm "fmt"`。

```
package main

import fm "fmt" // alias3

func main() {
   fm.Println("hello, world")
}
```

> 以相对路径在GOPATH下导入包会产生报错信息
>
> *报错信息：local import "./XXX" in non-local package*



